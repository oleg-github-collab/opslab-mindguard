# ‚ö° OpsLab Mindguard - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

## üöÄ –ó–∞ 5 —Ö–≤–∏–ª–∏–Ω

### –ö—Ä–æ–∫ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
```bash
./setup.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö
- ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- ‚úÖ –ù–∞–ª–∞—à—Ç—É—î .env
- ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏

### –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
```bash
./start_all.sh
```

### –ö—Ä–æ–∫ 3: –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
```
http://localhost:8000/api/docs
```

### –ö—Ä–æ–∫ 4: –£–≤—ñ–π—Ç–∏
```
Email: work.olegkaminskyi@gmail.com
Password: 0000
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
opslab-mindguard/
‚îú‚îÄ‚îÄ üöÄ setup.sh                     # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ üöÄ start_all.sh                 # –ó–∞–ø—É—Å–∫ –≤—Å—å–æ–≥–æ
‚îú‚îÄ‚îÄ üöÄ start_backend.sh             # –¢—ñ–ª—å–∫–∏ backend
‚îú‚îÄ‚îÄ üöÄ start_telegram_bot.sh        # –¢—ñ–ª—å–∫–∏ –±–æ—Ç
‚îú‚îÄ‚îÄ üìñ README.md                    # –û—Å–Ω–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ üìñ IMPLEMENTATION_GUIDE.md      # –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
‚îú‚îÄ‚îÄ üìñ ARCHITECTURE.md              # –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏
‚îú‚îÄ‚îÄ üìñ SUMMARY.md                   # –ü—ñ–¥—Å—É–º–æ–∫
‚îú‚îÄ‚îÄ üìñ QUICKSTART.md                # –¶–µ–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                     # FastAPI –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ database_schema.sql         # –ë–î –∑ RLS
‚îÇ   ‚îú‚îÄ‚îÄ telegram_bot.py             # Telegram –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îÇ   ‚îî‚îÄ‚îÄ .env.example                # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ scraper/
‚îÇ   ‚îî‚îÄ‚îÄ fetch_wall_data.py          # –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ index.html                      # Frontend
‚îî‚îÄ‚îÄ static/
    ‚îî‚îÄ‚îÄ style.css                   # Neobrutal —Å—Ç–∏–ª—ñ
```

---

## üîß –ö–æ–º–∞–Ω–¥–∏

### –ó–∞–ø—É—Å–∫
```bash
./start_all.sh              # –í—Å–µ —Ä–∞–∑–æ–º
./start_backend.sh          # –¢—ñ–ª—å–∫–∏ API
./start_telegram_bot.sh     # –¢—ñ–ª—å–∫–∏ –±–æ—Ç
```

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ë–î
createdb opslab_mindguard

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ schema
psql -d opslab_mindguard -f backend/database_schema.sql

# –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –ë–î
psql -d opslab_mindguard

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—ñ
psql -d opslab_mindguard -c "\dt"

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
psql -d opslab_mindguard -c "SELECT email, name, role FROM users;"
```

### Backend
```bash
cd backend
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
uvicorn main:app --reload

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ –ª–æ–≥–∞–º–∏
uvicorn main:app --reload --log-level debug

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –Ω–∞ —ñ–Ω—à–æ–º—É –ø–æ—Ä—Ç—É
uvicorn main:app --reload --port 8080
```

### Telegram Bot
```bash
cd backend
source venv/bin/activate
python telegram_bot.py
```

### –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
```bash
cd scraper
python fetch_wall_data.py
# –†–µ–∑—É–ª—å—Ç–∞—Ç: wall_data_extracted.json
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ API
```bash
# Health check
curl http://localhost:8000/health

# Docs
open http://localhost:8000/api/docs
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
```bash
# –õ–æ–≥—ñ–Ω
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "work.olegkaminskyi@gmail.com",
    "password": "0000"
  }'

# –û—Ç—Ä–∏–º–∞—î—Ç–µ —Ç–æ–∫–µ–Ω, –∑–±–µ—Ä–µ–∂—ñ—Ç—å –π–æ–≥–æ
export TOKEN="eyJ..."

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
curl http://localhost:8000/api/auth/me \
  -H "Authorization: Bearer $TOKEN"
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–∑–æ–ª—è—Ü—ñ—ó –¥–∞–Ω–∏—Ö
```bash
# –£–≤—ñ–π–¥—ñ—Ç—å —è–∫ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "kateryna.petukhova@opslab.uk",
    "password": "0000"
  }'

export EMPLOYEE_TOKEN="..."

# –°–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —á—É–∂—ñ –¥–∞–Ω—ñ (–º–∞—î –≤—ñ–¥–º–æ–≤–∏—Ç–∏ 403)
curl http://localhost:8000/api/metrics/team/all \
  -H "Authorization: Bearer $EMPLOYEE_TOKEN"

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–≤–æ—ó –¥–∞–Ω—ñ (–º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏)
curl http://localhost:8000/api/metrics/my \
  -H "Authorization: Bearer $EMPLOYEE_TOKEN"
```

---

## üìä API Endpoints

### –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
```
POST   /api/auth/login           # –í—Ö—ñ–¥
POST   /api/auth/logout          # –í–∏—Ö—ñ–¥
GET    /api/auth/me              # –ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
```

### –ú–µ—Ç—Ä–∏–∫–∏
```
GET    /api/metrics/my           # –ú–æ—ó –º–µ—Ç—Ä–∏–∫–∏
GET    /api/metrics/team/all     # –í—Å—ñ (admin/manager)
GET    /api/metrics/monthly      # –ü–æ –º—ñ—Å—è—Ü—è—Ö
POST   /api/metrics              # –î–æ–¥–∞—Ç–∏
```

### –°—Ç—ñ–Ω–∞ –ø–ª–∞—á—É
```
GET    /api/wall/posts           # –í—Å—ñ –ø–æ—Å—Ç–∏
POST   /api/wall/posts           # –ù–æ–≤–∏–π –ø–æ—Å—Ç
PATCH  /api/wall/posts/{id}      # –û–Ω–æ–≤–∏—Ç–∏
DELETE /api/wall/posts/{id}      # –í–∏–¥–∞–ª–∏—Ç–∏ (admin)
```

### –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è
```
GET    /api/admin/users          # –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
POST   /api/admin/users          # –î–æ–¥–∞—Ç–∏
PATCH  /api/admin/users/{id}     # –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
DELETE /api/admin/users/{id}     # –î–µ–∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏
```

---

## üîë –î–µ—Ñ–æ–ª—Ç–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

| Email | –ü–∞—Ä–æ–ª—å | –†–æ–ª—å | –î–æ—Å—Ç—É–ø |
|-------|--------|------|--------|
| work.olegkaminskyi@gmail.com | 0000 | admin | –í—Å—ñ –¥–∞–Ω—ñ, –ù–ï –≤ –∞–Ω–∞–ª—ñ—Ç–∏—Ü—ñ |
| jane.davydyuk@opslab.uk | 0000 | manager | –í—Å—ñ –¥–∞–Ω—ñ, –£ –∞–Ω–∞–ª—ñ—Ç–∏—Ü—ñ |
| kateryna.petukhova@opslab.uk | 0000 | employee | –õ–∏—à–µ —Å–≤–æ—ó –¥–∞–Ω—ñ |
| ivanna.sakalo@opslab.uk | 0000 | employee | –õ–∏—à–µ —Å–≤–æ—ó –¥–∞–Ω—ñ |
| mykhailo.ivashchuk@opslab.uk | 0000 | employee | –õ–∏—à–µ —Å–≤–æ—ó –¥–∞–Ω—ñ |

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û:** –ó–º—ñ–Ω—ñ—Ç—å –≤—Å—ñ –ø–∞—Ä–æ–ª—ñ –ø–µ—Ä–µ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –≤ production!

---

## ü§ñ Telegram Bot

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ token
3. –û—Ç—Ä–∏–º–∞–π—Ç–µ –≤–∞—à Chat ID —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot)
4. –î–æ–¥–∞–π—Ç–µ –≤ `backend/.env`:
```env
TELEGRAM_BOT_TOKEN=123456:ABC-DEF...
TELEGRAM_ADMIN_CHAT_ID=12345678
TELEGRAM_JANE_CHAT_ID=87654321
```

### –ó–∞–ø—É—Å–∫
```bash
./start_telegram_bot.sh
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
–ù–∞–ø–∏—à—ñ—Ç—å –±–æ—Ç—É `/start` –≤ Telegram

### Cron –¥–ª—è –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å (–ü'—è—Ç–Ω–∏—Ü—è 10:00)
```bash
crontab -e

# –î–æ–¥–∞—Ç–∏:
0 10 * * 5 cd /path/to/backend && ./venv/bin/python -c "from telegram_bot import send_weekly_reminder; import asyncio; asyncio.run(send_weekly_reminder())"
```

---

## üêõ Troubleshooting

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
cd backend
source venv/bin/activate
pip install -r requirements.txt

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ .env
cat .env

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—Ç
lsof -i :8000  # –ú–∞—î –±—É—Ç–∏ –≤—ñ–ª—å–Ω–∏–π
```

### –ë–î –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π PostgreSQL
pg_ctl status

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
brew services start postgresql@15  # macOS
sudo service postgresql start       # Linux

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ë–î
psql -l | grep opslab_mindguard
```

### Telegram –±–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ token
echo $TELEGRAM_BOT_TOKEN

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π
ps aux | grep telegram_bot

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
cd backend
python telegram_bot.py
```

### Frontend –Ω–µ –∑'—î–¥–Ω—É—î—Ç—å—Å—è –∑ backend
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –≤ backend/.env
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ backend –∑–∞–ø—É—â–µ–Ω–∏–π
curl http://localhost:8000/health
```

---

## üìñ –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ

- **–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: [README.md](README.md)
- **–ü–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è**: [IMPLEMENTATION_GUIDE.md](IMPLEMENTATION_GUIDE.md)
- **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**: [ARCHITECTURE.md](ARCHITECTURE.md)
- **–ü—ñ–¥—Å—É–º–æ–∫**: [SUMMARY.md](SUMMARY.md)

---

## üÜò –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `tail -f backend/logs/app.log`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ë–î: `psql -d opslab_mindguard -c "SELECT * FROM users;"`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ API: http://localhost:8000/api/docs

**–ö–æ–Ω—Ç–∞–∫—Ç–∏:**
- –û–ª–µ–≥ –ö–∞–º—ñ–Ω—Å—å–∫–∏–π: work.olegkaminskyi@gmail.com

---

**Made with üß° by OpsLab**
