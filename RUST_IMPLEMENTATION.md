# ü¶Ä OpsLab Mindguard - Rust Implementation

## ‚úÖ –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–∞ Rust

### 1. üìã –°–∏—Å—Ç–µ–º–∞ —â–æ–¥–µ–Ω–Ω–∏—Ö —á–µ–∫—ñ–Ω—ñ–≤

**–§–∞–π–ª:** `src/bot/daily_checkin.rs`

#### –ú–æ–¥—É–ª—ñ:

##### `QuestionBank` - –ë–∞–Ω–∫ –≤–∞—Ä—ñ–∞—Ç–∏–≤–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å (—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞)

- **32+ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è**
- **8 —Ç–∏–ø—ñ–≤ –ø–∏—Ç–∞–Ω—å:**
  - Mood (–Ω–∞—Å—Ç—Ä—ñ–π) - 4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏
  - Energy (–µ–Ω–µ—Ä–≥—ñ—è) - 4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏
  - Stress (—Å—Ç—Ä–µ—Å) - 4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏
  - Sleep (—Å–æ–Ω) - 4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏
  - Workload (–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è) - 4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏
  - Motivation (–º–æ—Ç–∏–≤–∞—Ü—ñ—è) - 4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏
  - Focus (—Ñ–æ–∫—É—Å) - 3 –≤–∞—Ä—ñ–∞–Ω—Ç–∏
  - Wellbeing (–±–ª–∞–≥–æ–ø–æ–ª—É—á—á—è) - 3 –≤–∞—Ä—ñ–∞–Ω—Ç–∏

##### `CheckInGenerator` - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —á–µ–∫—ñ–Ω—ñ–≤

```rust
// –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —á–µ–∫—ñ–Ω—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –¥–Ω—è —Ç–∏–∂–Ω—è
let checkin = CheckInGenerator::generate_checkin(user_id, day_of_week);
```

**–†–æ–∑–ø–æ–¥—ñ–ª –ø–æ –¥–Ω—è—Ö:**
- –ü–æ–Ω–µ–¥—ñ–ª–æ–∫: –ù–∞—Å—Ç—Ä—ñ–π + –ï–Ω–µ—Ä–≥—ñ—è + –ú–æ—Ç–∏–≤–∞—Ü—ñ—è
- –í—ñ–≤—Ç–æ—Ä–æ–∫-–ß–µ—Ç–≤–µ—Ä: –ù–∞—Å—Ç—Ä—ñ–π + –°—Ç—Ä–µ—Å + –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- –ü'—è—Ç–Ω–∏—Ü—è: –ù–∞—Å—Ç—Ä—ñ–π + –ë–ª–∞–≥–æ–ø–æ–ª—É—á—á—è + –ï–Ω–µ—Ä–≥—ñ—è
- –í–∏—Ö—ñ–¥–Ω—ñ: –ù–∞—Å—Ç—Ä—ñ–π + –°–æ–Ω + –ë–ª–∞–≥–æ–ø–æ–ª—É—á—á—è

##### `MetricsCalculator` - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –º–µ—Ç—Ä–∏–∫

```rust
// –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞ 7-10 –¥–Ω—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
let metrics = MetricsCalculator::calculate_metrics(&answers)?;

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤
if MetricsCalculator::is_critical(&metrics) {
    send_alert(metrics).await?;
}

// –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è —Ä–∏–∑–∏–∫—É
let risk = MetricsCalculator::risk_level(&metrics); // "low" | "medium" | "high" | "critical"
```

**–§–æ—Ä–º—É–ª–∏:**

- **WHO-5:** `avg(mood + energy + wellbeing) √ó 10` (0-100)
- **PHQ-9:** `avg(inv(mood + energy + motivation)) √ó 2.7` (0-27)
- **GAD-7:** `avg(stress + inv(focus)) √ó 2.1` (0-21)
- **MBI:** `avg(stress + workload + inv(energy) + inv(motivation)) √ó 10` (0-100%)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö:

```rust
pub struct CheckIn {
    pub id: String,
    pub user_id: Uuid,
    pub date: DateTime<Utc>,
    pub day_of_week: u32,
    pub questions: Vec<Question>,
    pub intro_message: String,
    pub estimated_time: String,
}

pub struct Metrics {
    pub who5_score: i32,
    pub phq9_score: i32,
    pub gad7_score: i32,
    pub mbi_score: f64,
    pub sleep_duration: f64,
    pub sleep_quality: f64,
    pub work_life_balance: f64,
    pub stress_level: f64,
}
```

---

### 2. ü§ñ –†–æ–∑—à–∏—Ä–µ–Ω—ñ Telegram Handlers

**–§–∞–π–ª:** `src/bot/enhanced_handlers.rs`

#### –§—É–Ω–∫—Ü—ñ—ó:

##### –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞:

```rust
/start     - –ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
/checkin   - –ü–æ—á–∞—Ç–∏ —â–æ–¥–µ–Ω–Ω–∏–π —á–µ–∫—ñ–Ω
/status    - –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω (–º–µ—Ç—Ä–∏–∫–∏ –∑–∞ —Ç–∏–∂–¥–µ–Ω—å)
/wall      - –°—Ç—ñ–Ω–∞ –ø–ª–∞—á—É
/help      - –î–æ–ø–æ–º–æ–≥–∞ –ø—Ä–∏ —Ç—Ä–∏–≤–æ–∑—ñ/–ø–∞–Ω—ñ—Ü—ñ
```

##### –©–æ–¥–µ–Ω–Ω—ñ —á–µ–∫—ñ–Ω–∏:

```rust
async fn start_daily_checkin(bot: &Bot, chat_id: ChatId, user_id: Uuid) -> Result<()>
```

- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —á–µ–∫—ñ–Ω—É –∑ –≤–∞—Ä—ñ–∞—Ç–∏–≤–Ω–∏–º–∏ –ø–∏—Ç–∞–Ω–Ω—è–º–∏
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ (–∫–Ω–æ–ø–∫–∏ 1-10)
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –≤ –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –º—ñ–∂ –ø–∏—Ç–∞–Ω–Ω—è–º–∏

##### Callback handlers (inline –∫–Ω–æ–ø–∫–∏):

```rust
async fn handle_callback(bot: &Bot, state: SharedState, callback: CallbackQuery) -> Result<()>
```

- –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è
- –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

##### –°—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:

```rust
async fn send_user_status(bot: &Bot, state: &SharedState, chat_id: ChatId, user_id: Uuid) -> Result<()>
```

- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∑–∞ 7-10 –¥–Ω—ñ–≤
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –º–µ—Ç—Ä–∏–∫
- –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è —Ä–∏–∑–∏–∫—É
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

##### –ö—Ä–∏—Ç–∏—á–Ω—ñ –∞–ª–µ—Ä—Ç–∏:

```rust
async fn send_critical_alert(bot: &Bot, state: &SharedState, user_id: Uuid, metrics: &Metrics) -> Result<()>
```

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è —á–µ–∫—ñ–Ω—É
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –û–ª–µ–≥—É (admin)
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –î–∂–µ–π–Ω (manager)
- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è–º–∏

##### –Ü—Å–Ω—É—é—á—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (–∑–±–µ—Ä–µ–∂–µ–Ω—ñ):

- **–ì–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** AI –∞–Ω–∞–ª—ñ–∑, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è, –ø–æ—Ä–∞–¥–∏
- **–†–æ–±–æ—Ç–∞ –≤ –≥—Ä—É–ø–∞—Ö:** –†–µ–∞–∫—Ü—ñ—è –Ω–∞ –∑–≥–∞–¥–∫–∏, AI-–∫–æ—É—á
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –Ü—Å—Ç–æ—Ä—ñ—è –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 3 –¥–Ω—ñ

---

### 3. üóÑÔ∏è –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ë–î

#### ‚úÖ –ú—ñ–≥—Ä–∞—Ü—ñ—ó –¥–ª—è —á–µ–∫—ñ–Ω—ñ–≤ - –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

**–§–∞–π–ª:** `migrations/03_checkin_answers.sql`

–î–æ–¥–∞–Ω–æ —Ç–∞–±–ª–∏—Ü—ñ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó:

```sql
CREATE TABLE checkin_answers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    question_id INTEGER NOT NULL,
    question_type VARCHAR(50) NOT NULL,
    value SMALLINT NOT NULL CHECK (value >= 1 AND value <= 10),
    created_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE INDEX idx_checkin_answers_user_date ON checkin_answers(user_id, created_at DESC);
CREATE INDEX idx_checkin_answers_type ON checkin_answers(question_type, created_at DESC);

-- SQL —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
CREATE FUNCTION get_recent_checkin_answers(p_user_id UUID, p_days INTEGER)
RETURNS TABLE (...);

-- SQL —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –º–µ—Ç—Ä–∏–∫
CREATE FUNCTION calculate_user_metrics(p_user_id UUID)
RETURNS JSON;
```

#### ‚úÖ –ë–î —Ñ—É–Ω–∫—Ü—ñ—ó (Rust) - –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

**–§–∞–π–ª:** `src/db/mod.rs` (lines 142-229)

```rust
// –ó–±–µ—Ä–µ–≥—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
pub async fn insert_checkin_answer(
    pool: &PgPool,
    user_id: Uuid,
    question_id: i32,
    qtype: &str,
    value: i16
) -> Result<()>

// –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑–∞ N –¥–Ω—ñ–≤
pub async fn get_recent_checkin_answers(
    pool: &PgPool,
    user_id: Uuid,
    days: i32
) -> Result<Vec<CheckInAnswer>>

// –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ SQL —Ñ—É–Ω–∫—Ü—ñ—é
pub async fn calculate_user_metrics(
    pool: &PgPool,
    user_id: Uuid
) -> Result<Option<Metrics>>

// –û—Ç—Ä–∏–º–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∑–∞ N –¥–Ω—ñ–≤
pub async fn get_checkin_answer_count(
    pool: &PgPool,
    user_id: Uuid,
    days: i32
) -> Result<i64>
```

**–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ handlers:**
- Callback handler –∑–±–µ—Ä—ñ–≥–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –∫–Ω–æ–ø–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —á–µ–∫—ñ–Ω—É
- Status command –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –º–µ—Ç—Ä–∏–∫–∏ –∑ –ë–î

---

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ó–∞–ø—É—Å–∫:

```bash
# Build
cargo build --release

# Run
cargo run --release

# –ê–±–æ —á–µ—Ä–µ–∑ Railway
railway up
```

### Environment Variables:

```env
# Database
DATABASE_URL=postgresql://...

# Telegram
TELEGRAM_BOT_TOKEN=your_bot_token
ADMIN_TELEGRAM_ID=oleh_telegram_id
JANE_TELEGRAM_ID=jane_telegram_id
BOT_USERNAME=mindguard_bot

# AI
OPENAI_API_KEY=sk-...

# Encryption
APP_ENC_KEY=base64_encoded_key
SESSION_KEY=base64_encoded_key
```

---

## üìä –ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—Ç–∏

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î `/checkin`:

```
–ë–û–¢:
üìã –©–æ–¥–µ–Ω–Ω–∏–π —á–µ–∫—ñ–Ω
–î–æ–±—Ä–æ–≥–æ —Ä–∞–Ω–∫—É! üåÖ –ù–æ–≤–∏–π —Ç–∏–∂–¥–µ–Ω—å –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è. –Ø–∫ —Ç–≤—ñ–π –Ω–∞—Å—Ç—Ä—ñ–π?
‚è±Ô∏è –ó–∞–π–º–µ 2-3 —Ö–≤–∏–ª–∏–Ω–∏

---

üòä –ü–∏—Ç–∞–Ω–Ω—è 1/3
–Ø–∫ —Ç–≤—ñ–π –Ω–∞—Å—Ç—Ä—ñ–π —Å—å–æ–≥–æ–¥–Ω—ñ?

[1] [2] [3] [4] [5] [6] [7] [8] [9] [10]
[‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏]

>>> –ö–û–†–ò–°–¢–£–í–ê–ß –Ω–∞—Ç–∏—Å–∫–∞—î [7]

‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å –∑–±–µ—Ä–µ–∂–µ–Ω–∞: 7/10

---

‚ö° –ü–∏—Ç–∞–Ω–Ω—è 2/3
–Ø–∫–∏–π —É —Ç–µ–±–µ —Ä—ñ–≤–µ–Ω—å –µ–Ω–µ—Ä–≥—ñ—ó?

[1] [2] [3] [4] [5] [6] [7] [8] [9] [10]
[‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏]

>>> –ö–û–†–ò–°–¢–£–í–ê–ß –Ω–∞—Ç–∏—Å–∫–∞—î [8]

‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å –∑–±–µ—Ä–µ–∂–µ–Ω–∞: 8/10

---

üéØ –ü–∏—Ç–∞–Ω–Ω—è 3/3
–ù–∞—Å–∫—ñ–ª—å–∫–∏ —Ç–∏ –≤–º–æ—Ç–∏–≤–æ–≤–∞–Ω–∏–π —Å—å–æ–≥–æ–¥–Ω—ñ?

[1] [2] [3] [4] [5] [6] [7] [8] [9] [10]
[‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏]

>>> –ö–û–†–ò–°–¢–£–í–ê–ß –Ω–∞—Ç–∏—Å–∫–∞—î [6]

‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å –∑–±–µ—Ä–µ–∂–µ–Ω–∞: 6/10

---

‚úÖ –ß–µ–∫—ñ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –î—è–∫—É—é! üôè

–¢–≤–æ—ó –¥–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Ç–∞ –±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É.
–ü—Ä–æ–¥–æ–≤–∂—É–π –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ —â–æ–¥–µ–Ω–Ω—ñ —á–µ–∫—ñ–Ω–∏ –¥–ª—è –ø–æ–≤–Ω–æ—ó –∫–∞—Ä—Ç–∏–Ω–∏.

–ü–æ–±–∞—á–∏–º–æ—Å—å –∑–∞–≤—Ç—Ä–∞! üëã
```

### –î–µ–Ω—å 7 - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î `/status`:

```
–ë–û–¢:
üìä –¢–≤—ñ–π —Å—Ç–∞—Ç—É—Å –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ç–∏–∂–¥–µ–Ω—å

üü¢ –†—ñ–≤–µ–Ω—å —Ä–∏–∑–∏–∫—É: low

üåü –ë–ª–∞–≥–æ–ø–æ–ª—É—á—á—è (WHO-5): 72/100
üòî –î–µ–ø—Ä–µ—Å—ñ—è (PHQ-9): 5/27
üò∞ –¢—Ä–∏–≤–æ–∂–Ω—ñ—Å—Ç—å (GAD-7): 6/21
üî• –í–∏–≥–æ—Ä–∞–Ω–Ω—è (MBI): 32.0%

üò¥ –°–æ–Ω: 7.2h (—è–∫—ñ—Å—Ç—å 7.0/10)
‚öñÔ∏è Work-Life Balance: 6.0/10
‚ö†Ô∏è –†—ñ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—É: 12.0/40

–î–∞–Ω—ñ –∑–∞ 21 –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
```

### –ö—Ä–∏—Ç–∏—á–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π:

```
–ë–û–¢ ‚Üí –ö–û–†–ò–°–¢–£–í–ê–ß:
‚ö†Ô∏è –í–∞–∂–ª–∏–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

–¢–≤–æ—ó –ø–æ–∫–∞–∑–Ω–∏–∫–∏ –≤–∫–∞–∑—É—é—Ç—å –Ω–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ —Ñ–∞—Ö—ñ–≤—Ü—è.

–†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ:
‚Ä¢ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç–∏ –∑ –∫–µ—Ä—ñ–≤–Ω–∏–∫–æ–º
‚Ä¢ –ó–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞
‚Ä¢ –í–∑—è—Ç–∏ –≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫

–¢–≤–æ—î –∑–¥–æ—Ä–æ–≤'—è - –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–µ! üíö

---

–ë–û–¢ ‚Üí –û–õ–ï–ì (admin):
üö® –ö–†–ò–¢–ò–ß–ù–ò–ô –ê–õ–ï–†–¢!

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: a1b2c3d4-...

üìä –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏:
‚Ä¢ WHO-5 (–±–ª–∞–≥–æ–ø–æ–ª—É—á—á—è): 45/100
‚Ä¢ PHQ-9 (–¥–µ–ø—Ä–µ—Å—ñ—è): 16/27
‚Ä¢ GAD-7 (—Ç—Ä–∏–≤–æ–∂–Ω—ñ—Å—Ç—å): 14/21
‚Ä¢ MBI (–≤–∏–≥–æ—Ä–∞–Ω–Ω—è): 72.0%
‚Ä¢ –°—Ç—Ä–µ—Å: 28.0/40

‚ö†Ô∏è –¢–ï–†–ú–Ü–ù–û–í–ê –î–Ü–Ø –ù–ï–û–ë–•–Ü–î–ù–ê!

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:
1. –ù–µ–≥–∞–π–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –∑ –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º
2. –ó–º–µ–Ω—à–µ–Ω–Ω—è —Ä–æ–±–æ—á–æ–≥–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
3. 1-–Ω–∞-1 –∑—É—Å—Ç—Ä—ñ—á –ø—Ä–æ—Ç—è–≥–æ–º 24 –≥–æ–¥–∏–Ω

---

–ë–û–¢ ‚Üí –î–ñ–ï–ô–ù (manager):
[–¢–∞ —Å–∞–º–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è]
```

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–æ–∑—Å–∏–ª–∫–∞

### TODO: Scheduler –¥–ª—è —â–æ–¥–µ–Ω–Ω–∏—Ö —á–µ–∫—ñ–Ω—ñ–≤

```rust
use tokio_cron_scheduler::{JobScheduler, Job};

// –©–æ–¥–µ–Ω–Ω—ñ —á–µ–∫—ñ–Ω–∏ –æ 10:00
let sched = JobScheduler::new().await?;

sched.add(
    Job::new("0 0 10 * * *", |_uuid, _l| {
        // –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ—Ö –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
        // –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —á–µ–∫—ñ–Ω–∏
    })?
).await?;

sched.start().await?;
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ

### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:
- [x] –°–∏—Å—Ç–µ–º–∞ –≤–∞—Ä—ñ–∞—Ç–∏–≤–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å (32+ —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è)
- [x] –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —á–µ–∫—ñ–Ω—ñ–≤ –ø–æ –¥–Ω—è—Ö —Ç–∏–∂–Ω—è
- [x] –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –º–µ—Ç—Ä–∏–∫ (WHO-5, PHQ-9, GAD-7, MBI)
- [x] Telegram handlers –∑ inline –∫–Ω–æ–ø–∫–∞–º–∏
- [x] Callback –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- [x] –ö—Ä–∏—Ç–∏—á–Ω—ñ –∞–ª–µ—Ä—Ç–∏
- [x] –°—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- [x] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º Rust –∫–æ–¥–æ–º

### TODO:
- [x] –ú—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `checkin_answers` - **–ì–û–¢–û–í–û** ([migrations/03_checkin_answers.sql](migrations/03_checkin_answers.sql))
- [x] –ë–î —Ñ—É–Ω–∫—Ü—ñ—ó (insert/get checkin answers) - **–ì–û–¢–û–í–û** ([src/db/mod.rs:142-229](src/db/mod.rs))
- [x] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –ë–î —Ñ—É–Ω–∫—Ü—ñ–π –∑ handlers - **–ì–û–¢–û–í–û** ([src/bot/enhanced_handlers.rs](src/bot/enhanced_handlers.rs))
- [ ] Scheduler –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Ä–æ–∑—Å–∏–ª–∫–∏
- [ ] Unit —Ç–µ—Å—Ç–∏
- [ ] –°—Ç—ñ–Ω–∞ –ø–ª–∞—á—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (frontend)

---

## üîß –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### –Ü—Å–Ω—É—é—á—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (–∑–±–µ—Ä–µ–∂–µ–Ω—ñ):

‚úÖ **–ì–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:**
- AI —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è (OpenAI Whisper)
- –ê–Ω–∞–ª—ñ–∑ –µ–º–æ—Ü—ñ–π–Ω–æ–≥–æ —Å—Ç–∞–Ω—É
- –ü–æ—Ä–∞–¥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ñ–≤

‚úÖ **–†–æ–±–æ—Ç–∞ –≤ –≥—Ä—É–ø–∞—Ö:**
- –†–µ–∞–∫—Ü—ñ—è –Ω–∞ –∑–≥–∞–¥–∫–∏ `@mindguard_bot`
- AI-–∫–æ—É—á –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –ü–æ—Ä–∞–¥–∏ –ø—Ä–∏ —Å—Ç—Ä–µ—Å—ñ/–≤–∏–≥–æ—Ä–∞–Ω–Ω—ñ

‚úÖ **–ë–µ–∑–ø–µ–∫–∞:**
- AES-256-GCM —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
- Row Level Security –≤ –ë–î
- –ê–Ω–æ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

‚úÖ **AI:**
- OpenAI GPT –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è (3 –¥–Ω—ñ)
- Urgent risk flagging

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥—É

```
src/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ mod.rs                    # –ï–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ handlers.rs               # –Ü—Å–Ω—É—é—á—ñ handlers (–∑–±–µ—Ä–µ–∂–µ–Ω—ñ)
‚îÇ   ‚îú‚îÄ‚îÄ enhanced_handlers.rs      # ‚≠ê –ù–æ–≤—ñ handlers –∑ —á–µ–∫—ñ–Ω–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ daily_checkin.rs          # ‚≠ê –°–∏—Å—Ç–µ–º–∞ —á–µ–∫—ñ–Ω—ñ–≤
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îî‚îÄ‚îÄ mod.rs                    # –ë–î —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ ai.rs                     # AI —Å–µ—Ä–≤—ñ—Å
‚îú‚îÄ‚îÄ crypto.rs                     # –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ state.rs                      # App state
‚îî‚îÄ‚îÄ main.rs                       # Entry point
```

---

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏ Rust —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

‚úÖ **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –ù—É–ª—å overhead
‚úÖ **–ë–µ–∑–ø–µ–∫–∞** - Type safety, memory safety
‚úÖ **Concurrency** - Tokio async runtime
‚úÖ **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - Compile-time –≥–∞—Ä–∞–Ω—Ç—ñ—ó
‚úÖ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** - –ó —ñ—Å–Ω—É—é—á–∏–º –∫–æ–¥–æ–º
‚úÖ **Deployment** - –û–¥–∏–Ω binary

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

**–ö–æ–Ω—Ç–∞–∫—Ç–∏:**
- –û–ª–µ–≥ –ö–∞–º—ñ–Ω—Å—å–∫–∏–π: work.olegkaminskyi@gmail.com

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:**
- [ARCHITECTURE.md](ARCHITECTURE.md) - –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- [README.md](README.md) - –ó–∞–≥–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

---

**Made with ü¶Ä by OpsLab**
**Rust Edition | –°—ñ—á–µ–Ω—å 2026**
